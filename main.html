<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport"
          content="width=device-width,
          user-scalable=yes,
          initial-scale= 1.0,
          maxium-scale = 3.0
          ">
    <title>가장 간단한 HTML</title>

    <style media="screen">
      p{ font-size: 20px;}
    </style>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script type="text/javascript">
      function g_InitCanvas(i_Width){
        console.log('Window Cx: ' + window.innerWidth + ',Window Cy: ' + window.innerHeight);

        if (i_Width > window.innerWidth)
          i_Width = window.innerWidth;

        let arstPos = [];
        arstPos.push({m_szIdCanvas : 'cvsQuiz', m_cx : i_Width, m_cy : 100});
        arstPos.push({m_szIdCanvas : 'cvsTimer', m_cx : i_Width, m_cy : Math.floor(i_Width / 10)});
        arstPos.push({m_szIdCanvas : 'cvsHint', m_cx : i_Width, m_cy : Math.floor(i_Width / 10 * 6)});
        arstPos.push({m_szIdCanvas : 'cvsBtn', m_cx : i_Width, m_cy : Math.floor(i_Width / 5 * 4 +2) });
        arstPos.push({m_szIdCanvas : 'cvsDragGame', m_cx : i_Width, m_cy : arstPos[2].m_cy + arstPos[3].m_cy});

        let x = 0;
        let y = 0;
        let iDragGameX = 0;
        let iDragGamey = 0;
        let szDiv='<div class="" style="position:absolute; top:';//0px; z-index:1">'
        let szCanvas='<canvas id="';//

        let arszIdDiv = ['temp','divIdQuiz','divIdTimer','divIdHint','divIdBtn','divIdDragGame'];

        let i = 1;
        for (let key in arstPos){
          let stPos=arstPos[key];
          let iPutX= x;
          let iPutY= y;

          if ('cvsHint' === stPos.m_szIdCanvas){
            x2 = x;
            y2 = y;
          }

          if ('cvsDragGame' === stPos.m_szIdCanvas){
            iPutX = x2;
            iPutY = y2;
          }else{
            y = y+stPos.m_cy;
          }

          let szTag=szDiv + iPutY + 'px; left:' + iPutX + 'px; z-index:'+ i + '" id="' + arszIdDiv[i] + '">\r\n';
          szTag=szTag + szCanvas + stPos.m_szIdCanvas + '" width="' + stPos.m_cx + '" height="' + stPos.m_cy + '"></canvas>\r\n';
          szTag=szTag + '</div>\r\n';

          // console.log(szTag);
          document.write(szTag);

          i = i+1;

        }
      }

      g_InitCanvas(387);
    </script>

  </head>
  <body>
    <!-- <div class="">

      <img id="id_sprRobot" src="Img/robot.png" alt="" width="100px" height="100px">
      <img id="id_sprBomb" src="Img/Bomb1.png" alt="" width="100px" height="100px">
    </div> -->
    <div style="display:none">
      <img id="id_sprRobot" src="Img/robot.png" alt="" width="0px" height="0px">
      <img id="id_sprBomb" src="Img/Bomb1.png" alt="" width="0px" height="0px">
      <img id="id_sprQuizOk" src="Img/QuizOk.png" alt="" width="100px" height="100px">
      <img id="id_sprQuizNo" src="Img/QuizNo.png" alt="" width="100px" height="100px">
      <img id="id_sprTimeOver" src="Img/timeover.png" alt="" width="100px" height="100px">
      <img id="id_sprColck" src="Img/Clock.png" alt="" width="100px" height="100px">
      <img id="id_sprRedX" src="Img/RedX.png" alt="" width="100px" height="100px">
      <img id="id_sprJudgment" src="Img/Judgment.png" alt="" width="100px" height="100px">
      <audio preload="auto">
        <source  src="Snd/Fire.MP3" type = "">
      </audio>
      <audio preload="auto">
        <source  src="Snd/Die.MP3" type = "">
      </audio>
      <audio preload="auto">
        <source  src="Snd/Victory.mp3" type = "">
      </audio>
      <audio preload="auto">
        <source  src="Snd/Fail.wav" type = "">
      </audio>
      <audio preload="auto">
        <source  src="Snd/ClockTicking.wav" type = "">
      </audio>
      <audio preload="auto">
        <source  src="Snd/TimeStop.wav" type = "">
      </audio>
      <audio preload="auto">
        <source  src="Snd/TimeOverFail.MP3" type = "">
      </audio>
      <audio preload="auto">
        <source  src="Snd/BtnClick.wav" type = "">
      </audio>
      <audio preload="auto">
        <source  src="Snd/DingDongDengDong.wav" type = "">
      </audio>
      <audio preload="auto">
        <source  src="Snd/DragGameComplete.wav" type = "">
      </audio>
    </div>

    <script src='https://code.responsivevoice.org/responsivevoice.js'></script>
    <script type="text/javascript" src="CSys.js?verson=1.512"></script>
    <script type="text/javascript" src="./Lib/CSound.js?verson=1.542422"></script>
    <script type="text/javascript" src="./Lib/CSprite.js?verson=1.542422"></script>
    <script type="text/javascript">
      var g_Sys = new CSys();
      var g_arSprite = new Array();
      g_arSprite.push(new CSprite());
      var g_sprRobot = g_arSprite[g_arSprite.length -1];
      g_arSprite.push(new CSprite());
      var g_sprBomb = g_arSprite[g_arSprite.length -1];
      g_arSprite.push(new CSprite());
      var g_sprQuizOk = g_arSprite[g_arSprite.length -1];
      g_arSprite.push(new CSprite());
      var g_sprQuizNo = g_arSprite[g_arSprite.length -1];
      g_arSprite.push(new CSprite());
      var g_sprTimeOver = g_arSprite[g_arSprite.length -1];
      g_arSprite.push(new CSprite());
      var g_sprClock = g_arSprite[g_arSprite.length -1];
      g_arSprite.push(new CSprite());
      var g_sprRedX = g_arSprite[g_arSprite.length -1];
      g_arSprite.push(new CSprite());
      var g_sprJudgment = g_arSprite[g_arSprite.length -1];

      var g_sndFire = new CSound();
      var g_sndDie = new CSound();
      var g_sndSucces = new CSound();
      var g_sndFail = new CSound();
      var g_sndTimeStop = new CSound();
      var g_sndTimeOverFail = new CSound();
      var g_sndClockTick = new CSound();
      var g_sndBtnClick = new CSound();
      var g_sndDDDD = new CSound();
      var g_sndDragGameComplete = new CSound();

      // var g_sprTest=new Image();
      // g_sprTest.src='./Img/robot.png';
      window.onload = function(){
        console.log('Window Load');

         g_sprRobot.Load('Img/robot.png');
         g_sprBomb.Load('Img/Bomb1.png');
         g_sprQuizOk.Load('Img/QuizOk.png');
          g_sprQuizNo.Load('Img/QuizNo.png');
          g_sprTimeOver.Load('Img/timeover.png');
          g_sprClock.Load('Img/Clock.png');
          g_sprRedX.Load('Img/RedX.png');
          g_sprJudgment.Load('Img/Judgment.png');
         // g_sprRobot.LoadFromID('id_sprRobot');
         // g_sprBomb.LoadFromID('id_sprBomb');
        g_sndFire.Load("Snd/Fire.MP3");
        g_sndDie.Load("Snd/Die.MP3");
        g_sndSucces.Load("Snd/Victory.mp3");
        g_sndFail.Load("Snd/Fail.wav");
        g_sndTimeStop.Load("Snd/TimeStop.wav");
        g_sndTimeOverFail.Load("Snd/TimeOverFail.MP3");
        g_sndClockTick.Load("Snd/ClockTicking.wav");
        g_sndBtnClick.Load("Snd/BtnClick.wav");
        g_sndDDDD.Load("Snd/DingDongDengDong.wav");
        g_sndDragGameComplete.Load("Snd/DragGameComplete.wav");

        if (self.name != 'reload')
        {
          self.name = 'reload';
          self.location.reload(true);
        }
        else self.name = '';
      }
    </script>

    <script type="text/javascript" src="./Lib/PageDraw.js?verson=1.57"></script>
    <script type="text/javascript" src="./Lib/CMoveImg.js?verson=1.542222"></script>
    <script type="text/javascript" src="./Lib/CBtn.js?verson=1.542222"></script>
    <script type="text/javascript" src="CBtnWnd.js?verson=1.542211"></script>
    <script type="text/javascript" src="CQuizWnd.js?verson=1.5422221"></script>
    <script type="text/javascript" src="CHintWnd.js?verson=1.5422221"></script>
    <script type="text/javascript" src="CTimerWnd.js?verson=1.5422221"></script>
    <script type="text/javascript" src="CDragGame.js?verson=1.54"></script>


    <script type="text/javascript">

      var g_pageQuiz=new CQuizWnd();
      var g_pageHint=new CHintWnd();
      var g_pageBtn=new CBtnWnd();
      var g_pageTimer=new CTimerWnd();
      var g_pageDragGame=new CDrageGameWnd();

      function OnTimerEx(){
        if (g_Sys.IsModeNone()){
          let isLoad = true;
          for (let key1 in g_arSprite){
            if (false === g_arSprite[key1].m_isLoad){
              isLoad=false;
              break;
            }
          }
          //if (false===g_Sys.m_isLoadImage && g_sprRobot.m_isLoad && g_sprBomb.m_isLoad && g_sprQuizOk.m_isLoad && g_sprQuizNo.m_isLoad && g_sprTimeOver.m_isLoad && g_sprClock.m_isLoad){
          if (false===g_Sys.m_isLoadImage && isLoad)
          {
            g_arSprite.forEach(function(stSpr){
                stSpr.ReLoadSize();
            });

            // g_sprRobot.ReLoadSize();
            // g_sprBomb.ReLoadSize();
            // g_sprQuizOk.ReLoadSize();
            // g_sprQuizNo.ReLoadSize();
            // g_sprTimeOver.ReLoadSize();
            // g_sprClock.ReLoadSize();
            // g_sprRedX.ReLoadSize();
            // g_sprJudgment.ReLoadSize();

            g_pageQuiz.InitCPage('cvsQuiz','divIdQuiz');
            g_pageHint.Init('cvsHint','divIdHint');
            g_pageBtn.Init('cvsBtn','divIdBtn');
            g_pageTimer.Init('cvsTimer','divIdTimer');
            g_pageDragGame.Init('cvsDragGame','divIdDragGame');

            g_pageBtn.SetShow(false);
            g_pageDragGame.SetShow(false);

            g_Sys.OnTimerEx = function(){
              if (g_Sys.m_arstMsgQ.length > 0){
                let stMsg=g_Sys.m_arstMsgQ[0];
                console.log(stMsg);
                if (g_Sys.e_msgQuizVoiceStart === stMsg.eMsg){
                  g_pageTimer.SetBar();
                }else if (g_Sys.e_msgTitleEnd_wParam1IsBtnID === stMsg.eMsg){

                  g_pageBtn.SetShow(true);

                  g_Sys.m_eLevel = stMsg.wParam;
                  g_Sys.CreateQuizMinus();
                  // if (g_Sys.m_arstQuiz.length > 0)
                  // {
                  //     let i;
                  //     for (i = 0;i < 4;i ++){
                  //         let stQuiz = g_Sys.m_arstQuiz[i];
                  //         g_Sys.m_arstQuizHistory.push(new CItemQuiz(stQuiz.m_iFirst,stQuiz.m_iSecond));
                  //     }
                  // }
                  g_pageQuiz.SetSys(g_Sys);
                  g_pageHint.SetSys(g_Sys);
                  g_pageBtn.SetSys(g_Sys);
                   g_Sys.SetRun(g_Sys.e_modeQuiz);
                   // g_Sys.SetRun(g_Sys.e_modeDragGame);
                   // g_pageDragGame.SetQuiz(g_Sys.m_arstQuizHistory);
                  g_pageBtn.RestoreBtn(false,true);
                }else if (g_Sys.e_msgTimeOver === stMsg.eMsg){
                  if (g_Sys.IsModeDragGame()){
                    g_Sys.SetRun(g_Sys.e_modeDragGame);
                    g_pageDragGame.SetQuiz(g_Sys.m_arstQuizHistory);
                    g_pageBtn.RestoreBtn(false,true);
                    g_pageTimer.SetTimer(60*1000,true);
                  }else{
                    g_Sys.m_Select = 0;
                    g_pageTimer.m_isNeedDraw = false;
                    g_pageBtn.StopInput(g_Sys.m_Select);
                  }
                }else if (g_Sys.e_msgQuizVoiceEnd === stMsg.eMsg){
                  g_pageBtn.RestoreBtn(true,true);
                  g_pageTimer.SetTimer(g_Sys.GetTimeQuizLimit(),true);
                }else if (g_Sys.e_msgSelectVoiceStart === stMsg.eMsg){
                  if (0 === g_Sys.m_Select){
                    responsiveVoice.speak('빨리 풀었어야지! 정답이 무엇인지 확인해볼까?','Korean Female',
                        {onend: g_pageBtn.OnEndTTSCheckSelect});
                  }else{
                    responsiveVoice.speak(g_Sys.GetStrNumber(g_Sys.m_Select,'라')+'고? 맞는지 확인해볼까?','Korean Female',
                        {onend: g_pageBtn.OnEndTTSCheckSelect});
                  }

                }else if (g_Sys.e_msgSelectVoiceEnd === stMsg.eMsg){
                  g_Sys.m_eMode=g_Sys.e_modeCheckSelect;

                  g_pageQuiz.AniCheckSelect(true);
                  g_pageHint.AniCheckSelect(true);
                  //g_pageBtn.AniCheckSelect(true);
                }else if (g_Sys.e_msgSetResult_wParamIsNewResult === stMsg.eMsg){
                  g_pageQuiz.SetResult(stMsg.wParam);
                  g_pageBtn.SetResult(stMsg.wParam);
                }else if (g_Sys.e_msgSetHitStart === stMsg.eMsg){
                  g_pageBtn.SetHit();
                }else if (g_Sys.e_msgSetHitEnd === stMsg.eMsg){
                  g_pageTimer.SetWantNextQuiz();
                }else if (g_Sys.e_msgVoiceRetryEnd === stMsg.eMsg){
                  g_pageBtn.SetScore(true);
                }else if (g_Sys.e_msgGameOver === stMsg.eMsg){

                }else if (g_Sys.e_msgEndDragGame === stMsg.eMsg){
                    g_Sys.m_arstQuizHistory = [];
                    g_Sys.m_arstMsgQ.push(new CMsg(g_Sys.e_msgNextQuiz));
                }else if (g_Sys.e_msgNextQuiz === stMsg.eMsg){
                  if (g_Sys.IsCanDragGame())
                  {
                      g_Sys.SetRun(g_Sys.e_modeDragGame);
                      g_pageDragGame.SetQuiz(g_Sys.m_arstQuizHistory);
                      g_pageBtn.RestoreBtn(false,true);
                      g_pageTimer.SetTimer(60*1000,true);
                  }
                  else if (g_Sys.m_arstQuiz.length <= 0){
                    g_pageBtn.SetScore();
                  }else{
                    let stNewQuiz = g_Sys.m_arstQuiz[0];
                    g_Sys.m_Second = stNewQuiz.m_iSecond;
                    g_Sys.m_first = stNewQuiz.m_iFirst;
                    g_Sys.m_arstQuizHistory.push(g_Sys.m_arstQuiz.shift());
                    // g_Sys.m_arstQuiz.splice(0,1);

                    g_Sys.m_Select = 0;

                    g_pageQuiz.SetSys(g_Sys);
                    g_pageHint.SetSys(g_Sys);
                    g_pageBtn.SetSys(g_Sys);

                    g_pageQuiz.m_isTTS = false;

                    g_pageBtn.RestoreBtn(false,true);
                    g_Sys.SetRun(g_Sys.e_modeQuiz);
                  }

                }
                g_Sys.m_arstMsgQ.splice(0,1);
              }

              let tCur=new Date().getTime();
              g_pageHint.OnTimerEx(tCur);
              g_pageBtn.OnTimerEx(tCur);
              g_pageQuiz.OnTimerEx(tCur);
              g_pageTimer.OnTimerEx(tCur);
              g_pageDragGame.OnTimerEx(tCur);
            }

            g_Sys.SetRun = function(e_mode){
              this.m_eMode = typeof e_mode !== 'undefined' ? e_mode : g_Sys.e_modeQuiz;

              g_pageQuiz.m_isNeedDraw = true;
              g_pageHint.m_isNeedDraw = true;
              g_pageBtn.m_isNeedDraw = true;
              g_pageDragGame.m_isNeedDraw = true;

              if (this.IsModeTitle()){
                g_pageHint.SetShow(true);
                g_pageBtn.SetShow(false);
                g_pageDragGame.SetShow(false);
              }
              else if (this.IsModeDragGame()){
                g_pageHint.SetShow(false);
                g_pageBtn.SetShow(false);
                g_pageDragGame.SetShow(true);
              }else{
                g_pageHint.SetShow(true);
                g_pageBtn.SetShow(true);
                g_pageDragGame.SetShow(false);
              }

              g_pageBtn.SetEnable(g_Sys.IsModeQuiz());
              g_pageHint.AutoShowBtn();
            }

            g_pageBtn.m_hwnd.onmousedown = function(st_event){
              if (g_pageTimer.IsCanNextQuiz()){
                g_pageTimer.GoNextQuiz();
                return;
              }

              let iIndex = g_pageBtn.OnMouseDown(st_event);
              if ( iIndex > 0){
                g_Sys.m_Select = iIndex;
                if (g_Sys.IsHitSucces()){
                  g_Sys.m_arstQuizSuccess.push(new CItemQuiz(g_Sys.m_first,g_Sys.m_Second));
                }else{
                  g_Sys.m_arstQuizFail.push(new CItemQuiz(g_Sys.m_first,g_Sys.m_Second));
                }

                g_pageTimer.m_isNeedDraw = false;

              }
            }

            g_pageHint.m_hwnd.onmousedown = function(st_event){
              if (g_pageTimer.IsCanNextQuiz()){
                g_pageTimer.GoNextQuiz();
                return;
              }else if (g_pageHint.OnMouseDown(st_event)){

              }
            }

            g_pageTimer.m_hwnd.onmousedown = function(st_event){
              if (g_pageTimer.IsCanNextQuiz()){
                g_pageTimer.GoNextQuiz();
                return;
              }else if (g_pageTimer.OnMouseDown(st_event)){

              }
            }

            // g_pageDragGame.m_hwnd.onmousedown = function(st_event){
            //   if (g_pageDragGame.OnMouseDown(st_event) !== 0){
            //
            //   }
            // }

            g_pageQuiz.SetSys(g_Sys);
            g_pageHint.SetSys(g_Sys);
            g_pageBtn.SetSys(g_Sys);

            g_Sys.SetRun(g_Sys.e_modeTitle);
            g_Sys.m_isLoadImage = true;

            g_Sys.OnTimerEx();

            console.log('Image Load Complete Run!!');
          }
        }else if (g_Sys.IsModeTitle()){
          g_Sys.OnTimerEx();
        }else if (g_Sys.IsModeQuiz()){
          g_Sys.OnTimerEx();
        }else if (g_Sys.IsModeDragGame()){
          g_Sys.OnTimerEx();
        }else if (g_Sys.IsModeCheckSelect()){
          if (false === g_pageQuiz.m_isAniLock && false === g_pageHint.m_isAniLock && false === g_pageBtn.m_isAniLock){

          }
          g_Sys.OnTimerEx();
        }
      }
      setInterval(OnTimerEx,20);
    </script>

    <p>fdsfsdfsdfsdf</p>


  </body>
  <script type="text/javascript">
    console.log(navigator.userAgent);
  </script>
</html>
